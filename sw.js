this.addEventListener('fetch',function(e){e.respondWith(Response.redirect('data:text/html;https://safemega/;charset=utf-8,%3C%21doctype%20html%3E%3Cmeta%20charset%3Dutf-8%3E%3Ctitle%3ESafe%20MEGA%3C%2Ftitle%3E%3Cmeta%20name%3Dmobile-web-app-capable%20content%3Dyes%3E%3Cmeta%20content%3D%22IE%3Dedge%22%20http-equiv%3DX-UA-Compatible%3E%3Cmeta%20name%3Dviewport%20content%3D%22width%3Ddevice-width%2C%20initial-scale%3D1%22%3E%3Cstyle%3Ebody%7Bmargin%3A40px%20auto%3Bmax-width%3A650px%3Bline-height%3A1.6%3Bfont-size%3A18px%3Bcolor%3A%23444%3Bpadding%3A0%2010px%7Dh1%2Ch2%2Ch3%7Bline-height%3A1.2%7Dh1%20small%2Coutput%7Bdisplay%3Ablock%7D.view%7Bdisplay%3Anone%7D.current.view%7Bdisplay%3Ablock%7D.important%7Bcolor%3A%23D22%7Dtextarea%7Bwidth%3A100%25%7D%3C%2Fstyle%3E%3Cheader%3E%3Ch1%3E%3Ca%20href%3D%23%21extra-safe-version%3EExtra%3C%2Fa%3E%20Safe%20MEGA%3Csmall%3EAdd%20passwords%20to%20MEGA%20folders%3C%2Fsmall%3E%3C%2Fh1%3E%3C%2Fheader%3E%3Cdiv%20id%3Dmain-view%20class%3D%22current%20view%22%3E%3Cp%3EMEGA%20is%20created%20to%20be%20a%20end%20to%20end%20encrypted%20file%20storage%2C%20but%20it%20only%20allows%20random%20generated%20keys.%20If%20it%20increases%20safety%20by%20avoiding%20unsafe%20keys%20in%20the%20other%20hand%20encourages%20those%20keys%20being%20shared%20in%20plain%20text.%3C%2Fp%3E%3Cp%3EThis%20web%20application%20is%20created%20to%20add%20an%20interface%20for%20adding%20passwords%20for%20folders.%20While%20file%20links%20can%27t%20be%20changed%20by%20the%20user%20because%20those%20links%20handle%20both%20decryption%20and%20integrity%2C%20in%20the%20other%20hand%20folder%20links%20only%20handles%20decryption%20making%20possible%20to%20the%20user%2C%20%3Ca%20href%3D%23%21generate-key%3Eusing%20the%20developer%20tools%3C%2Fa%3E%2C%20change%20the%20encryption%20key%20arbitrarily.%3C%2Fp%3E%3Cp%3EWhile%20sharing%20the%20folder%20instead%20of%20sharing%20an%20%3Ccode%3Ehttps%3A%2F%2Fmega.nz%2F%23F%21handler%21key%3C%2Fcode%3E%20link%2C%20replace%20it%20which%20%3Ccode%3Ehttps%3A%2F%2Fsafeme.ga%2F%23handler%3C%2Fcode%3E.%20After%20visiting%20this%20link%2C%20based%20on%20typed%20password%2C%20the%20user%20will%20be%20redirected%20to%20MEGA%20folder%20with%20the%20generated%20decryption%20key.%3C%2Fp%3E%3Cp%20class%3Dimportant%3EIt%20will%20prevent%20the%20decryption%20key%20being%20delivered%20in%20plain%20text%20by%20the%20share%20link%21%3C%2Fp%3E%3Cp%3EAs%20it%27s%20an%20single%20page%20application%20both%20the%20password%20and%20decryption%20key%20are%20never%20send%20to%20any%20server.%20For%20increased%20security%20this%20page%20works%20offline%20and%20%3Ca%20id%3Ddownload-link%20download%3Dsafemega.html%20href%3D.%3Ecan%20be%20downloaded%3C%2Fa%3E.%3C%2Fp%3E%3Cp%3EImportant%3A%20this%20is%20a%20proof%20of%20concept%20with%20the%20objective%20of%20developers%20implementing%20this%20feature%20in%20MEGA%20itself%20and%20other%20tools%20based%20in%20MEGA.%20There%20isn%27t%20an%20intention%20of%20keeping%20it%20forever%20as%20a%20developer%20console%20hack%2C%20or%20even%20requiring%20other%20clients%20or%20extensions%20to%20be%20build%20for%20that.%3C%2Fp%3E%3Cp%3EThis%20page%20code%20is%20written%20in%20ES6%2C%20so%20support%20for%20it%20is%20required.%20As%20PBKDF2-SHA-1%20is%20used%20for%20key%20derivation.%20WebCrypto%20support%20is%20also%20required%20too.%3C%2Fp%3E%3Cp%3EFor%20issues%20and%20more%20info%20%3Ca%20href%3Dhttps%3A%2F%2Fgithub.com%2Fqgustavor%2Fsafe-mega%3Echeck%20GitHub%20page%3C%2Fa%3E.%3C%2Fp%3E%3C%2Fdiv%3E%3Cdiv%20id%3Dgenerate-key%20class%3Dview%3E%3Cp%3EMEGA%20functions%20can%20be%20overwritten%20using%20developer%20tools.%20So%2C%20in%20order%20to%20choose%20which%20key%20is%20going%20to%20be%20used%20when%20sharing%20a%20folder%2C%20and%20allowing%20to%20use%20an%20PBKDF2%20derived%20encryption%20key%2C%20developer%20tools.%3C%2Fp%3E%3Cp%3EFirst%20share%20a%20empty%20folder%20normally.%20It%20will%20generate%20an%20random%20encryption%20key.%3C%2Fp%3E%3Cp%3EGenerate%20a%20key%20based%20in%20share%20handler%20%28the%20first%20part%20of%20the%20shared%20URL%2C%20between%20exclamations%29%20and%20the%20password%20of%20your%20preference%3A%3C%2Fp%3E%3Cform%20id%3Dmanual-generate%3E%3Cinput%20type%3Dtext%20placeholder%3DHandler%3E%3Cinput%20type%3Dpassword%20placeholder%3DPassword%3E%3Cinput%20type%3Dsubmit%20value%3D%22Generate%20key%22%3E%3Coutput%3E%3C%2Foutput%3E%3C%2Fform%3E%3Cp%3EUpdate%20folder%20password%20by%20opening%20the%20shared%20folder%20in%20MEGA%20then%20using%20this%20code%20in%20developer%20console%3A%3C%2Fp%3E%3Ccode%20id%3Ddev-code%3E%5Bcode%20will%20be%20shown%20after%20generating%20key%5D%3C%2Fcode%3E%3Cp%3EFinally%20add%20files%20to%20the%20folder%20normally%20and%20it%27s%20done.%3C%2Fp%3E%3Cp%3E%3Ca%20href%3D%23%3EMore%20info%20%E2%86%92%3C%2Fa%3E%3C%2Fp%3E%3C%2Fdiv%3E%3Cdiv%20id%3Ddecryption-view%20class%3Dview%3E%3Cp%3EEnter%20password%20to%20decrypt%20folder%3A%3C%2Fp%3E%3Cform%20id%3Dauto-generate%3E%3Cinput%20type%3Dpassword%20placeholder%3DPassword%3E%3Cinput%20type%3Dsubmit%20value%3D%22Decrypt%20folder%22%3E%3C%2Fform%3E%3Cp%3E%3Ca%20href%3D%23%3EMore%20info%20%E2%86%92%3C%2Fa%3E%3C%2Fp%3E%3C%2Fdiv%3E%3Cdiv%20id%3Dsafer-view%20class%3Dview%3E%3Cp%3EYou%27re%20using%20the%20extra%20safe%20version%20of%20Safe%20MEGA%3C%2Fp%3E%3Cp%3EAll%20the%20page%20code%20is%20contained%20in%20a%20Data%20URI%2C%20which%20can%20be%20bookmarked%20making%20this%20page%20impossible%20to%20be%20updated%20or%20took%20down.%3C%2Fp%3E%3Cp%3EIt%20means%20if%20me%20%28the%20developer%29%2C%20GitHub%20%28the%20hosting%20provider%29%20or%20the%20NSA%20%28you%20know%20who%20they%20are%29%20want%20to%20hack%20you%20thought%20this%20tool%20it%20will%20not%20me%20possible.%3C%2Fp%3E%3Cp%3EHow%20to%20use%20the%20bookmarked%20version%3F%20Follow%20%3Ca%20href%3D%23%3Ethe%20instructions%3C%2Fa%3E%20and%20replace%20%22https%3A%2F%2Fsafeme.ga%2F%22%20with%20the%20code%20below%3A%3C%2Fp%3E%3Cp%3E%3Ctextarea%20id%3Dsource-code%3E%3C%2Ftextarea%3E%3C%2Fp%3E%3Cp%3EDon%27t%20worry%20if%20it%27s%20hard%20to%20do%2C%20if%20you%27re%20seeing%20this%20page%20is%20because%20your%20browser%20can%20handle%20that%20for%20you%20via%20Service%20Workers.%3C%2Fp%3E%3Cp%20style%3Dcolor%3Agray%3Bfont-size%3A.5em%3E%28of%20course%20the%20developers%20from%20your%20browser%20and%20operating%20system%20can%20still%20hack%20you%20via%20auto%20updates.%20Do%20you%20trust%20%22don%27t%20be%20evil%22%3F%20If%20it%20stop%20working%20in%20future%20blame%20then.%29%3C%2Fp%3E%3Cp%3E%3Ca%20href%3D%23%3EMore%20info%20%E2%86%92%3C%2Fa%3E%3C%2Fp%3E%3C%2Fdiv%3E%3Cscript%3E%28function%28%29%7Bfunction%20n%28a%29%7Bswitch%28a%29%7Bcase%20%22SHA-1%22%3Areturn%20160%3Bcase%20%22SHA-256%22%3Areturn%20256%3Bcase%20%22SHA-384%22%3Areturn%20384%3Bcase%20%22SHA-512%22%3Areturn%20512%7Dthrow%20Error%28%22Unsupported%20hash%20function%22%29%3B%7Dfunction%20p%28a%2Cb%2Cf%2Cc%29%7Ba%3D%28new%20TextEncoder%28%22utf-8%22%29%29.encode%28a%29%3Breturn%20crypto.subtle.importKey%28%22raw%22%2Ca%2C%22PBKDF2%22%2C%211%2C%5B%22deriveBits%22%5D%29.then%28function%28a%29%7Bvar%20d%3Dn%28f%29%3Breturn%20crypto.subtle.deriveBits%28%7Bname%3A%22PBKDF2%22%2Chash%3Af%2Csalt%3Ab%2Citerations%3Ac%7D%2Ca%2Cd%29%7D%29%7Dfunction%20g%28a%2Cb%29%7Bvar%20d%3D%28new%20TextEncoder%28%22utf-8%22%29%29.encode%28a%29%3Breturn%20crypto.subtle.digest%28%7Bname%3A%22SHA-256%22%7D%2C%0D%0Ad%29.then%28function%28a%29%7Breturn%20p%28b%2Ca%2C%22SHA-1%22%2C181020%29%7D%29%7Dfunction%20h%28%29%7Bd.forEach%28function%28a%29%7Breturn%20a.classList.remove%28%22current%22%29%7D%29%3B%22%23%21generate-key%22%3D%3D%3Dlocation.hash%3Fd%5B1%5D.classList.add%28%22current%22%29%3A%22%23%21extra-safe-version%22%3D%3D%3Dlocation.hash%3Fd%5B3%5D.classList.add%28%22current%22%29%3A1%3E%3Dlocation.hash.length%3Fd%5B0%5D.classList.add%28%22current%22%29%3Ad%5B2%5D.classList.add%28%22current%22%29%7Dfunction%20k%28a%29%7Balert%28%22Your%20browser%20required%20you%20to%20download%20the%20offline%20version%20before%20continuing.\nDon%27t%20worry%2C%20I%27m%20not%20a%20bad%20file%2C%20you%20even%20can%20check%20the%20my%20source%20code%2C%20audit%20me%2C%20fell%20in%20love%20with%20me...%20well%20anything%2C%20I%27m%20just%20a%20HTML%20file.%22%29%3B%0D%0Al.click%28%29%7Dfunction%20m%28a%29%7Ba%3Dnew%20Uint8Array%28a%29%3Bvar%20b%2Cd%3Da.length%2Cc%3D%22%22%3Bfor%28b%3D0%3Bb%3Cd%3Bb%2B%3D3%29c%2B%3De%5Ba%5Bb%5D%3E%3E2%5D%2Cc%2B%3De%5B%28a%5Bb%5D%263%29%3C%3C4%7Ca%5Bb%2B1%5D%3E%3E4%5D%2Cc%2B%3De%5B%28a%5Bb%2B1%5D%2615%29%3C%3C2%7Ca%5Bb%2B2%5D%3E%3E6%5D%2Cc%2B%3De%5Ba%5Bb%2B2%5D%2663%5D%3Breturn%20c.substr%280%2C22%29%7Dfunction%20q%28a%29%7Ba%3D%22https%3A%2F%2Fmega.nz%2F%23F%21%22%2Blocation.hash.substr%281%29%2B%22%21%22%2Bm%28a%29%3Blocation.href%3Da%7Dfunction%20r%28a%29%7Ba%3Dm%28a%29%3Bdocument.getElementsByTagName%28%22output%22%29%5B0%5D.innerHTML%3D%22Generated%20key%3A%20%22%2Ba%3Bdocument.getElementById%28%22dev-code%22%29.innerHTML%3D%22u_sharekeys%5Bpage.substr%283%29%5D%20%3D%20base64_to_a32%28%27%22%2Ba%2B%22%27%29%3B%22%7Dvar%20d%3D%5Bdocument.getElementById%28%22main-view%22%29%2C%0D%0Adocument.getElementById%28%22generate-key%22%29%2Cdocument.getElementById%28%22decryption-view%22%29%2Cdocument.getElementById%28%22safer-view%22%29%5D%2Ce%3D%22ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_%22%3Bwindow.addEventListener%28%22hashchange%22%2Ch%29%3Bdocument.getElementById%28%22auto-generate%22%29.addEventListener%28%22submit%22%2Cfunction%28a%29%7Ba.preventDefault%28%29%3Bg%28location.hash.substr%281%29%2Cdocument.querySelector%28%22%23auto-generate%20input%22%29.value%29.then%28q%2Ck%29%7D%29%3Bdocument.getElementById%28%22manual-generate%22%29.addEventListener%28%22submit%22%2Cfunction%28a%29%7Ba.preventDefault%28%29%3B%0D%0Ag%28document.querySelector%28%27%23manual-generate%20input%5Btype%3D%22text%22%5D%27%29.value%2Cdocument.querySelector%28%27%23manual-generate%20input%5Btype%3D%22password%22%5D%27%29.value%29.then%28r%2Ck%29%7D%29%3Bh%28%29%3Bdocument.getElementById%28%22source-code%22%29.textContent%3Dlocation.href.substr%280%2Clocation.href.length-location.hash.length%29%3Bvar%20l%3Ddocument.getElementById%28%22download-link%22%29%3Bl.href%3DURL.createObjectURL%28new%20Blob%28%5Bunescape%28location.href.split%28%22%3Bcharset%3Dutf-8%2C%22%29%5B1%5D%29%5D%29%29%7D%29%28%29%3B%3C%2Fscript%3E%3C%21--',301))});